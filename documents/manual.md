# KitaMatch - Manual

- Code API: /docs/build/index.html
- [Database manual](db_manual.md)

---

KitaMatch is an app that solves the allocation of day-care places in an innovative way. The application would like to offer a holistic implementation: from the registration of parents and kindergartens, to the matching procedure, municipal administration concerning the procedure and communication of the matching results.
It uses modern matching algorithms to design the allocation procedure in such a way that queues in front of kindergartens will be unnecessary and parents indicate their true preferences. This is possible because the implemented procedure is strategy proof, by the use of the deferred acceptance algorithm.


## Matching
For the matching procedure KitaMatch mainly uses the deferred acceptance algorithm from MatchingTools API (https://matchingtools.com/). The Deferred Acceptance Algorithm for hospital/residents problems (a.k.a. college admissions problems) finds the college- or student-optimal stable matchings or the related stable marriage problem. The implementation allows for incomplete preference lists (some agents find certain agents unacceptable) and unbalanced instances (unequal number of agents on both sides).  
The API is based on the R-package matchingMarkets (https://github.com/thiloklein/matchingMarkets).

## Code

Basically KitaMatch is structured, like every MVC model, into three main parts: controllers `app/Http/Controllers/..`, models `app/..` and views `resources/views/..`. If you have some questions about the overall code structure or where you can find certain elements, the best starting point is the Laravel documentation (https://laravel.com/docs/5.6/), since KitaMatch's core is based on the framework.

### Migration
To migrate and seed the database with new test values, run `php artisan migrate:refresh --seed`. The corresponding factories and seeder can found under `/database/..`. Edit `/database/seeds/<x>TableSeeder.php` for various test data sizes.

### Code Helper

#### Laravel Plugins

##### Laravel Migrations Generator | v2.0.2, 2017-09-19
All migrations of KitaMatch are generated by the plugin of Bernhard Breytenbach.
The description states: "Automatically generate your migrations from an existing database schema", for more Information see: https://github.com/Xethron/migrations-generator
Run: `php artisan migrate:generate applicants,guardians,matches,preferences,programs,providers,users` (except codes and criteria)


#### Database
The database scheme and the EER-Diagram have been created with MySQLWorkbench (https://www.mysql.com/products/workbench/), to get a more detailed view about the scheme have a look at `db_eer_diagram.mwb` with MySQLWorkbench.

#### Factories
There are factories defined to sample test data for the app.
To sample new ones: `php artisan db:seed`
(After edits in `factories` or `seeds`, please run `composer dump-autoload` for changes to take place)

#### Changes in .env
After changes in .env run:
`php artisan config:clear
php artisan cache:clear
composer dump-autoload`

#### Documentation API | Sami | v4.0.15, 2018-04-04
KitaMatch's API is based on Sami (https://github.com/FriendsOfPHP/Sami). To update or rebuild the documentation, run 'php sami.phar update sami.config.php' in the root directory of the project. For a detailed look at the configuration look into `sami.config.php`.
